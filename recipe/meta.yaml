{% set name = "pyroute2" %}
{% set version = "0.6.9" %}

package:
  name: {{ name|lower }}-split
  version: {{ version }}

source:
  - url: https://pypi.io/packages/source/p/pyroute2/pyroute2-{{ version }}.tar.gz
    sha256: 3d1c4d1a71fb569cab578f55f7134ef02d48e8b3182b4e7e66b2a775628edafb
    folder: pyroute2

  - url: https://pypi.io/packages/source/p/pyroute2.core/pyroute2.core-{{ version }}.tar.gz
    sha256: 947d0c8b69d1e23a9ac2fa6f55f9fbf54d007e5c44f2553554b2afa801170cea
    folder: pyroute2.core

  - url: https://pypi.io/packages/source/p/pyroute2.ethtool/pyroute2.ethtool-{{ version }}.tar.gz
    sha256: ea8ef9a652de4a57ba64582821918a2c28f1d61838676a243aad91a804f683c1
    folder: pyroute2.ethtool

  - url: https://pypi.io/packages/source/p/pyroute2.ipdb/pyroute2.ipdb-{{ version }}.tar.gz
    sha256: b09f59ce5ae1f4559558bed2b721e93cfb97a3a4ed34bcf6fe54010a5e775ab9
    folder: pyroute2.ipdb

  - url: https://pypi.io/packages/source/p/pyroute2.ipset/pyroute2.ipset-{{ version }}.tar.gz
    sha256: 89c10c267a34dd629474861367a048028f659b8dd1c0c8f13577284a4605f353
    folder: pyroute2.ipset

  - url: https://pypi.io/packages/source/p/pyroute2.ndb/pyroute2.ndb-{{ version }}.tar.gz
    sha256: 01293ac9cc3775034c578c666b13c01c32f52adad8d49190e72258709f8e8141
    folder: pyroute2.ndb

  - url: https://pypi.io/packages/source/p/pyroute2.nftables/pyroute2.nftables-{{ version }}.tar.gz
    sha256: f012f3f082286e6ac66fae0f857cf55d67e5dca2533a138bfa3d42e3f8e55ee2
    folder: pyroute2.nftables

  - url: https://pypi.io/packages/source/p/pyroute2.nslink/pyroute2.nslink-{{ version }}.tar.gz
    sha256: 5998d17b12a7d455978fee4a671a995c1d1a6669ddd0408a5adde1bd50ddcf8c
    folder: pyroute2.nslink

  - url: https://pypi.io/packages/source/p/pyroute2.minimal/pyroute2.minimal-{{ version }}.tar.gz
    sha256: 2ae912593490da8dbe71e7da2cbbe227e4c5e5e23118e1fdf4395294051fd5ed
    folder: pyroute2.minimal

build:
  number: 0

requirements:
  host:
    - python
  run:
    - python

outputs:
  - name: pyroute2.core
    build:
      noarch: python
      script:
        - cd pyroute2.core
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - psutil >=5.0
    test:
      imports:
        - pr2modules
        - pr2modules.bsd
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: the core'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.ethtool
    build:
      noarch: python
      script:
        - cd pyroute2.ethtool
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
    test:
      imports:
        - pr2modules
        # Import fails on Windows due to lack of fcntl
        # - pr2modules.ethtool
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: ethtool'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.ipdb
    build:
      noarch: python
      script:
        - cd pyroute2.ipdb
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
    test:
      imports:
        - pr2modules
        - pr2modules.ipdb
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: IPDB module'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.ipset
    build:
      noarch: python
      script:
        - cd pyroute2.ipset
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
    test:
      imports:
        - pr2modules
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: ipset'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.ndb
    build:
      noarch: python
      entry_points:
        - pyroute2-cli = pr2modules.ndb.cli:run
      script:
        - cd pyroute2.ndb
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
        - pyroute2.nslink
    test:
      imports:
        - pr2modules
        - pr2modules.cli
      commands:
        - pip check
        - pyroute2-cli --help
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: NDB module'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.nftables
    build:
      noarch: python
      script:
        - cd pyroute2.nftables
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
    test:
      imports:
        - pr2modules
        - pr2modules.nftables
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: nftables'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.nslink
    build:
      noarch: python
      script:
        - cd pyroute2.nslink
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core
    test:
      imports:
        - pr2modules
        - pr2modules.nslink
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: NetNS, NSPopen and remote modules'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2.minimal
    build:
      noarch: python
      script:
        - cd pyroute2.minimal
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core =={{ version }}
        - importlib-metadata
    test:
      imports:
        - pyroute2
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: 'Python Netlink library: minimal installation'
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

  - name: pyroute2
    build:
      noarch: python
      script:
        - cd pyroute2
        - {{ PYTHON }} -m pip install --no-deps . -vv
    requirements:
      host:
        - python >=3.6
        - pip
      run:
        - python >=3.6
        - pyroute2.core =={{ version }}
        - pyroute2.ethtool =={{ version }}
        - pyroute2.ipdb =={{ version }}
        - pyroute2.ipset =={{ version }}
        - pyroute2.ndb =={{ version }}
        - pyroute2.nftables =={{ version }}
        - pyroute2.nslink =={{ version }}
        - importlib-metadata
    test:
      imports:
        - pyroute2
      commands:
        - pip check
      requires:
        - pip
    about:
      home: https://github.com/svinota/pyroute2
      summary: Python Netlink library
      license: GPL-2.0-or-later OR Apache-2.0
      license_file:
        - LICENSE.GPL.v2
        - LICENSE.Apache.v2

about:
  home: https://github.com/svinota/pyroute2
  summary: Python Netlink library
  license: GPL-2.0-or-later OR Apache-2.0
  license_file:
    - LICENSE.GPL.v2
    - LICENSE.Apache.v2

extra:
  feedstock-name: pyroute2
  recipe-maintainers:
    - nehaljwani
